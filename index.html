<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="theme-color" content="#4A6FA5">
<title>â„ï¸ åŒ—æµ·é“é›ªå­£è‡ªç”±è¡Œ</title>
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700;900&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="meals.js"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        fuji: '#4A6FA5',
        'fuji-dark': '#3A5A8A',
        snow: '#F8F9FA',
        warmgray: '#9E9E9E',
        sakura: '#E8A0BF',
        matcha: '#7DB9A5',
        yuzu: '#F4A261',
      },
      fontFamily: {
        zen: ['Zen Maru Gothic', 'sans-serif'],
      },
    },
  },
}
</script>
<style>
* { font-family: 'Zen Maru Gothic', sans-serif; -webkit-tap-highlight-color: transparent; }
body { background: #F8F9FA; overflow-x: hidden; }
::-webkit-scrollbar { display: none; }
* { scrollbar-width: none; }

/* Snow pattern background */
.snow-bg {
  background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%234A6FA5' fill-opacity='0.04'%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Ccircle cx='40' cy='25' r='1.5'/%3E%3Ccircle cx='25' cy='50' r='1'/%3E%3Ccircle cx='55' cy='45' r='1.5'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}

/* Glass effect */
.glass { backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); background: rgba(255,255,255,0.85); }
.glass-dark { backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); background: rgba(74,111,165,0.92); }

/* Animations */
@keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
@keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes snowfall { 0% { transform: translateY(-10px) rotate(0deg); opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { transform: translateY(100vh) rotate(360deg); opacity: 0; } }
.fade-in { animation: fadeIn 0.35s ease-out; }
.slide-up { animation: slideUp 0.4s ease-out; }

/* Active button press */
.btn-press { transition: transform 0.1s; }
.btn-press:active { transform: scale(0.95); }

/* Day capsule scrollbar */
.day-scroll { overflow-x: auto; scroll-behavior: smooth; -webkit-overflow-scrolling: touch; }
.day-scroll::-webkit-scrollbar { display: none; }

/* Checkbox styling */
.custom-check { accent-color: #4A6FA5; width: 20px; height: 20px; cursor: pointer; }

/* Snow particles */
.snowflake {
  position: fixed; top: -10px; color: #fff; font-size: 14px;
  animation: snowfall linear infinite; pointer-events: none; z-index: 0; opacity: 0.5;
  text-shadow: 0 0 3px rgba(74,111,165,0.3);
}
</style>
</head>
<body class="snow-bg">
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect, useRef, useCallback } = React;

// ============================================================
// DATA
// ============================================================

const TRIP_DAYS = [
  {
    day: 1, date: '2/21(å…­)', theme: 'æŠµé”æš–èƒƒæ‹‰éºµ', location: 'CTS â†’ æœ­å¹Œ',
    clothing: 'é•·ç‰ˆç¾½çµ¨å¤–å¥—ã€ç™¼ç†±è¡£ã€é˜²æ»‘é›ªé´ã€æ¯›å¸½ã€æ‰‹å¥—',
    snowTip: 'æŠµé”æ™‚ç´„ -3Â°Cï¼Œæ©Ÿå ´åˆ°å¸‚å€æ³¨æ„ä¿æš–',
    spots: [
      { time: '17:20', name: 'æŠµé”æ–°åƒæ­²æ©Ÿå ´ (CTS)', desc: 'é…·èˆª TR893 æŠµé”ã€‚å…¥å¢ƒã€é ˜è¡Œæå¾Œé¸æ“‡ä»¥ä¸‹ä»»ä¸€æ–¹æ¡ˆå‰å¾€æ°‘å®¿ã€‚å…©æ–¹æ¡ˆæŠµé”æ™‚é–“ç›¸è¿‘ï¼Œä¾ç¾å ´ç‹€æ³æ“‡ä¸€å³å¯ã€‚', icon: 'âœˆï¸', category: 'äº¤é€š', tags: [] },
      { time: '18:25', name: 'æ–¹æ¡ˆ Aï¼šæ©Ÿå ´å·´å£«ç›´é”', desc: 'ç›´é”æ°‘å®¿æ—ç«™ç‰Œï¼Œå…è½‰ä¹˜ï¼Œè¡Œæå…æ‰›ã€‚\n\nğŸ’° è»Šè³‡ï¼š1,300 æ—¥åœ“/äººï¼ˆåˆ· IC å¡ï¼‰\nğŸšŒ è»Šç¨®ï¼šæœ­å¹Œéƒ½å¿ƒè¡Œãï¼ˆç¶“ç”±ä¸­å³¶å…¬åœ’ï¼‰\nğŸ“¦ è¡Œæï¼šä¸‹å±¤å¤§å‹è¡Œæè‰™ï¼Œå¸æ©Ÿå”åŠ©æ¬é‹\n\nğŸš æ­è»Šä½ç½®\nãƒ»åœ‹å…§ç·š 14 è™Ÿç«™ç‰Œï¼ˆJAL å´ï¼‰\nãƒ»åœ‹å…§ç·š 22 è™Ÿç«™ç‰Œï¼ˆANA å´ï¼‰\nãƒ»åœ‹éš›ç·š 84 è™Ÿç«™ç‰Œ\nâ†’ è‹¥ 84 è™Ÿæ’éšŠè¶…é 15 äººï¼Œå»ºè­°èµ°åˆ°åœ‹å…§ç·š 22 è™Ÿï¼ˆç™¼è»Šèµ·é»ï¼Œå„ªå…ˆä¸Šè»Šï¼‰\n\nğŸš¶ å¦‚ä½•èµ°åˆ°åœ‹å…§ç·š\nãƒ»å¾åœ‹éš›ç·š 2F æŠµé”å¤§å»³å‡ºç™¼\nãƒ»æ²¿ã€Œåœ‹å…§ç·š Domestic Terminalã€æ¨™ç¤ºèµ°\nãƒ»é€šé Smile Road é€£é€šå»Šé“ï¼ˆå®¤å…§ã€æœ‰è‡ªå‹•æ­¥é“ï¼‰\nãƒ»åˆ°åœ‹å…§ç·šå¾Œæ­æ‰¶æ¢¯ä¸‹ 1F\nãƒ»å…¨ç¨‹ç´„ 8-10 åˆ†é˜\n\nâ° æ¨è–¦ç­æ¬¡ï¼ˆåœ‹å…§ç·šç™¼è»Šï¼‰\nãƒ»18:25 â† é¦–é¸\nãƒ»18:40\nãƒ»18:55\nãƒ»19:10ï¼ˆæœ«ç­å‚™é¸ï¼‰\n\nğŸ”– ä¸‹è»Šç«™ï¼šå—14æ¢è¡Œå•Ÿé€šï¼ˆå—14æ¡è¡Œå•“é€šï¼‰\nâ†’ ä¸‹è»Šå¾Œæ­¥è¡Œ 2-3 åˆ†é˜åˆ°æ°‘å®¿', icon: 'ğŸšŒ', category: 'äº¤é€š', tags: [], mapQuery: 'æ–°åƒæ­³ç©ºæ¸¯ å›½å†…ç·šãƒã‚¹ã®ã‚Šã°' },
      { time: '18:30', name: 'æ–¹æ¡ˆ Bï¼šJR + è¨ˆç¨‹è»Š', desc: 'åœ¨åœ°äººèˆ‡å•†å‹™å®¢æœ€å¸¸ç”¨çš„å¿«é€Ÿæ–¹æ¡ˆã€‚\n\nğŸšƒ ç¬¬ä¸€æ­¥ï¼šJR å¿«é€Ÿ Airport è™Ÿ\nãƒ»ä¹˜è»Šåœ°é»ï¼šæ©Ÿå ´åœ°ä¸‹ 1F JR æ–°åƒæ­²æ©Ÿå ´ç«™\nãƒ»ç­æ¬¡ï¼šæ¯ 12 åˆ†é˜ä¸€ç­ï¼Œæ¨è–¦ 18:30\nãƒ»è»Šç¨‹ï¼šç´„ 40 åˆ†é˜ï¼Œ19:10 æŠµé” JR æœ­å¹Œç«™\nãƒ»è»Šè³‡ï¼š1,150 æ—¥åœ“ï¼ˆæŒ‡å®šå¸­å¦åŠ  840 æ—¥åœ“ï¼‰\n\nğŸš• ç¬¬äºŒæ­¥ï¼šæœ­å¹Œç«™æ­è¨ˆç¨‹è»Š\nãƒ»ä¸‹è»Šå¾Œæ²¿ã€Œå—å‡ºå£ã€æˆ–ã€Œå¤§é€šå…¬åœ’ã€æŒ‡æ¨™èµ°\nãƒ»ä¹˜æ‰‹æ‰¶æ¢¯è‡³åœ°é¢ 1F å³åˆ°å—å£\nãƒ»å‡ºç«™èµ°ã€Œå—å£ã€â†’ è¨ˆç¨‹è»Šæ’ç­ç«™\nã€€ï¼ˆé è¿‘å¤§ä¸¸ç™¾è²¨èˆ‡æ±æ€¥ç™¾è²¨æ–¹å‘ï¼Œè¦æ¨¡æœ€å¤§ï¼‰\nãƒ»çµ¦å¸æ©Ÿçœ‹åœ°å€ï¼šã€Œå—14æ¡è¥¿6ä¸ç›®ã€\nã€€æˆ–èªªé è¿‘ã€Œè¡Œå•“é€šï¼ˆGyo-kei-doriï¼‰ã€\nãƒ»è»Šç¨‹ï¼šç´„ 10-15 åˆ†é˜\nãƒ»è»Šè³‡ï¼šç´„ 1,800-2,500 æ—¥åœ“/å°\nã€€ï¼ˆå¤œé–“å¯èƒ½åŠ æˆï¼‰\nãƒ»10 äººåˆ†ä¹˜ 3 å°è¨ˆç¨‹è»Š', icon: 'ğŸšƒ', category: 'äº¤é€š', tags: [], mapQuery: 'æ–°åƒæ­³ç©ºæ¸¯é§…' },
      { time: '19:40', name: 'Gyokeidori Luxury House', desc: 'Check-inï¼Œæ”¾ç½®è¡Œæï¼Œç¢ºèªæš–æ°£é‹ä½œã€‚å…©æ–¹æ¡ˆæŠµé”æ™‚é–“ç›¸è¿‘ï¼Œçš†ç´„ 19:40 å‰å¾Œåˆ°é”ã€‚', icon: 'ğŸ¨', category: 'é…’åº—', tags: [], mapQuery: 'Gyokeidori Luxury House æœ­å¹Œ' },
      { time: '20:30', name: 'å…ƒç¥–æœ­å¹Œæ‹‰éºµæ©«ä¸', desc: 'æ¨è–¦ï¼šç™½æ¨ºå±±èŠï¼ˆå‘³å™Œï¼‰ã€å¼Ÿå­å±ˆï¼ˆé†¬æ²¹ï¼‰ã€‚è«‹åˆ†çµ„ 2-4 äººè‡ªç”±é¸æ“‡åº—å®¶ã€‚é ç®— 1,200 æ—¥åœ“ã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: ['å¿…åƒ'], mapQuery: 'å…ƒç¥–ã•ã£ã½ã‚ãƒ©ãƒ¼ãƒ¡ãƒ³æ¨ªä¸', photoTip: 'æ‹æ”éœ“è™¹ç‡ˆå··å¼„ + ç†±é¨°é¨°æ‹‰éºµç‰¹å¯«' },
      { time: '22:00', name: 'Seicomart æ¡è²·', desc: 'æ°‘å®¿é™„è¿‘è¶…å•†æ¡è²·éš”æ—¥æ—©é¤ã€å¤§ç“¶æ°´ã€ä¸‹é…’èœã€‚æ¨è–¦ Hot Chef ç¾åšç‚¸é›ä¸¼ã€‚', icon: 'ğŸ›', category: 'è³¼ç‰©', tags: [], mapQuery: 'ã‚»ã‚¤ã‚³ãƒ¼ãƒãƒ¼ãƒˆ å—14æ¡' },
    ]
  },
  {
    day: 2, date: '2/22(æ—¥)', theme: 'å’Œæœè¡—æ‹å·¡ç¦®', location: 'ç¾æœˆæ«»ãƒ»ç‹¸å°è·¯ãƒ»å¤§é€šãƒ»åŒ—æµ·é“ç¥å®®ãƒ»ç™½è‰²æˆ€äºº',
    clothing: 'å’Œæœå…§æ­ç™¼ç†±è¡£è¤²ã€æš–æš–åŒ…è²¼èƒŒéƒ¨èˆ‡è…³åº•ã€é˜²æ»‘è‰å±¥æˆ–é›ªé´ï¼ˆè¦–åº—å®¶æä¾›ï¼‰',
    snowTip: 'å’Œæœè¼ƒè–„ï¼Œå‹™å¿…å…§æ­ä¿æš–ã€‚ç§»å‹•å»ºè­°æ­è¨ˆç¨‹è»Šæ¸›å°‘æˆ¶å¤–æ­¥è¡Œ',
    spots: [
      { time: '09:30', name: 'äºŒæ¢å¸‚å ´ æ—©é¤', desc: 'æ¨è–¦ï¼šå¤§ç£¯ï¼ˆçƒ¤é­š/æµ·é®®ä¸¼ï¼‰æˆ– Donburi Chayaã€‚é ç®— 2,500~3,500 æ—¥åœ“ã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: ['å¿…åƒ'], mapQuery: 'äºŒæ¡å¸‚å ´ æœ­å¹Œ', photoTip: 'æµ·é®®ä¸¼ä¿¯æ‹ + å¸‚å ´äººæ–‡è¡—æ‹' },
      { time: '10:00', name: 'ç¾æœˆæ«» å’Œæœæ›è£', desc: 'é–‹é–€å³å‰å¾€æ›è£ï¼Œç§Ÿå€Ÿå«æŒ‘é¸ç´„ 1 å°æ™‚ã€‚\n\nğŸ‘˜ æ›è£å®Œæˆå¾Œï¼Œç›´æ¥åœ¨é™„è¿‘ã€Œç‹¸å°è·¯ã€æ‹å¾©å¤å•†åº—è¡—æ°›åœã€‚\n\nâ° é‚„è¡£æ™‚é–“ï¼šé€šå¸¸ 18:00 é—œé–€\nâ†’ è«‹ç¢ºèªé‚„è¡£è¨ˆç•«ï¼Œæˆ–è©¢å•åº—å®¶æ˜¯å¦æœ‰éš”æ—¥æ­¸é‚„æ–¹æ¡ˆ', icon: 'ğŸ‘˜', category: 'æ´»å‹•', tags: ['å¿…æ‹'], mapQuery: 'ç¾æœˆæ«» æœ­å¹Œ' },
      { time: '11:30', name: 'æ±æœ¬é¡˜å¯º æœ­å¹Œåˆ¥é™¢', desc: 'å¾ç¾æœˆæ«»æ­¥è¡Œç´„ 10-12 åˆ†é˜ï¼ˆå’Œæœå°æ­¥èµ°ï¼‰ã€‚\n\nğŸ“¸ è¡—æ‹é‡é»\nãƒ»èŠåš´æœ¨é€ å»ºç¯‰èˆ‡å±‹ç°·\nãƒ»æ¯”èµ·ç¥å®®äººæ½®æ›´å°‘\nãƒ»éå¸¸é©åˆæ‹å‡ºå®‰éœã€ç¦ªæ„çš„å’Œæœå¤§ç‰‡', icon: 'â›©', category: 'æ™¯é»', tags: ['å¿…æ‹'], mapQuery: 'çœŸå®—å¤§è°·æ´¾ æ±æœ¬é¡˜å¯º æœ­å¹Œåˆ¥é™¢', photoTip: 'æœ¨é€ å±‹ç°·ä¸‹çš„å’Œæœå´æ‹ï¼Œå…‰å½±æ•ˆæœæ¥µä½³' },
      { time: '12:30', name: 'GARAKU æ¹¯å’–å“©', desc: 'äººæ°£æ¥µé«˜ï¼å»ºè­°æ´¾äºº 11:30 å…ˆå»æŠ½è™Ÿç¢¼ç‰Œã€‚å‚™æ¡ˆï¼šTreasure æˆ– Suage+ã€‚é ç®— 1,500 æ—¥åœ“ã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: ['å¿…åƒ'], mapQuery: 'GARAKU æ¹¯å’–å“© æœ­å¹Œ', photoTip: 'æ¹¯å’–å“©çš„ç¹½ç´›è”¬èœå¾ˆä¸Šé¡' },
      { time: '14:00', name: 'å¤§é€šå…¬åœ’ & æœ­å¹Œé›»è¦–å¡”', desc: 'æ­è¨ˆç¨‹è»Šæˆ–åœ°éµè‡³å¤§é€šç«™ã€‚\n\nğŸ“¸ è¡—æ‹é‡é»\nãƒ»ä»¥é›»è¦–å¡”ç‚ºèƒŒæ™¯æ˜¯å¤§é€šå…¬åœ’ç¶“å…¸æ§‹åœ–\nãƒ»å™´æ°´æ± æˆ–é•·æ¤…é‚Šå¯æ‹å‡ºã€Œæœ­å¹Œåœ°æ¨™æ„Ÿã€', icon: 'â›©', category: 'æ™¯é»', tags: ['å¿…æ‹'], mapQuery: 'ã•ã£ã½ã‚ãƒ†ãƒ¬ãƒ“å¡”', photoTip: 'é›»è¦–å¡”èˆ‡å’Œæœåˆç…§ï¼Œä½è§’åº¦ä»°æ‹æ›´å£¯è§€' },
      { time: '15:30', name: 'åŒ—æµ·é“ç¥å®®', desc: 'åœ°éµæ±è¥¿ç·šè‡³ã€Œåœ“å±±å…¬åœ’ç«™ã€æˆ–æ­è¨ˆç¨‹è»Šã€‚\n\nğŸ“¸ è¡—æ‹é‡é»\nãƒ»å’Œæœèˆ‡ç¥å®®æ˜¯çµ•é…\nãƒ»å·¨å¤§é³¥å±…ã€æ‰‹æ°´èˆã€é€šå¾€æœ¬æ®¿çš„æ—é“\nãƒ»æ°£å ´éå¸¸å¼·\n\nâ° ç¥å®® 17:00 é—œé–€ï¼Œæœ€æ™š 15:30 æŠµé”å¯ç²æœ€ä½³åˆå¾Œå…‰ç·š\n\nâ˜• ä¼‘æ¯é»ï¼šç¥å®®å…§ã€Œå…­èŠ±äº­ã€èŒ¶å±‹\nâ†’ é‚Šä¼‘æ¯é‚Šæ‹åƒç”œé»çš„ç‰¹å¯«', icon: 'â›©', category: 'æ™¯é»', tags: ['å¿…æ‹'], mapQuery: 'åŒ—æµ·é“ç¥å®®', photoTip: 'é›ªä¸­é³¥å±… Ã— å’Œæœï¼Œç”¨å»£è§’æ‹å‡ºæ°£å‹¢' },
      { time: '17:30', name: 'ç™½è‰²æˆ€äººå…¬åœ’', desc: 'åœ°éµæ±è¥¿ç·šååˆ°çµ‚é»ã€Œå®®ä¹‹æ¾¤ç«™ã€ã€‚\n\nğŸ“¸ è¡—æ‹é‡é»\nãƒ»å®Œå…¨ä¸åŒçš„æ­å¼ç«¥è©±é¢¨\nãƒ»ç´…ç£šç‰†ã€å™´æ°´æ± èˆ‡æ­å¼å»ºç¯‰\nãƒ»é©åˆæ‹å‡ºè¯éº—ã€Œå¤§æ­£æµªæ¼«ã€é¢¨æƒ…\nãƒ»ç‡Ÿæ¥­åˆ° 19:00ï¼Œå‚æ™šé»ç‡ˆå¾Œéå¸¸æµªæ¼«\n\nğŸ’¡ é€™è£¡æ˜¯æœ€è¥¿é‚Šï¼Œæ’åœ¨æœ€å¾Œä¸€ç«™æœ€é †è·¯\nâ†’ çµæŸå¾Œå¯ç›´æ¥æ­è¨ˆç¨‹è»Šå›é£¯åº—\nâ†’ æˆ–ååœ°éµå›å¤§é€šç«™é‚„å’Œæœ', icon: 'â›©', category: 'æ™¯é»', tags: ['å¿…æ‹'], mapQuery: 'ç™½ã„æ‹äººãƒ‘ãƒ¼ã‚¯', photoTip: 'å‚æ™šé»ç‡ˆå¾Œçš„æ­å¼å»ºç¯‰ Ã— å’Œæœ = å¤§æ­£æµªæ¼«' },
      { time: '19:30', name: 'æˆå‰æ€æ±—çƒ¤è‚‰', desc: 'æ¨è–¦ï¼šé”æ‘© Darumaï¼ˆéœ€æ’éšŠï¼‰æˆ–æ¾å°¾æˆå‰æ€æ±—ï¼ˆå»ºè­°è¨‚ä½ï¼‰ã€‚é ç®— 4,000 æ—¥åœ“ã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: ['å¿…åƒ'], mapQuery: 'ã ã‚‹ã¾ æœ¬åº— æœ­å¹Œ', photoTip: 'éµé‹çƒ¤è‚‰å†’ç…™çš„ç¬é–“æœ€æœ‰æ°›åœ' },
    ]
  },
  {
    day: 3, date: '2/23(ä¸€)', theme: 'å°æ¨½é‹æ²³ä¼éµ', location: 'ä¸‰è§’å¸‚å ´ãƒ»æ°´æ—é¤¨ãƒ»å ºç”ºé€šãƒ»é‹æ²³',
    clothing: 'ä¿æš–é•·ç‰ˆå¤–å¥—ã€åœå·¾ã€æ¯›å¸½ã€é˜²æ°´æ‰‹å¥—',
    snowTip: 'å°æ¨½æµ·é¢¨è¼ƒå¼·ï¼Œé«”æ„Ÿæº«åº¦æ›´ä½',
    spots: [
      { time: '08:30', name: 'JR è‡³å°æ¨½', desc: 'è¨ˆç¨‹è»Šè‡³æœ­å¹Œç«™ â†’ JR å¿«é€Ÿ Airport è‡³ã€Œå°æ¨½ç«™ã€ï¼ˆ750 æ—¥åœ“ï¼‰ã€‚', icon: 'ğŸšƒ', category: 'äº¤é€š', tags: [], mapQuery: 'å°æ¨½é§…' },
      { time: '10:00', name: 'ä¸‰è§’å¸‚å ´ æ—©åˆé¤', desc: 'æ¨è–¦ï¼šç€§æ³¢é£Ÿå ‚ã€‚äº®é»ï¼šå¯é»ä¸€éš»å¸ç‹èŸ¹ç¾å ´åˆ†é£Ÿï¼Œé…æµ·é®®ä¸¼ã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: ['å¿…åƒ'], mapQuery: 'ä¸‰è§’å¸‚å ´ å°æ¨½', photoTip: 'å¸ç‹èŸ¹ç‰¹å¯« + å¸‚å ´å…¨æ™¯' },
      { time: '11:30', name: 'å°æ¨½æ°´æ—é¤¨', desc: 'å†¬å­£é™å®šã€Œä¼éµé›ªä¸­æ•£æ­¥ã€ï¼å¾å°æ¨½ç«™å‰æ­å·´å£«ç´„ 25 åˆ†ã€‚', icon: 'â›©', category: 'æ™¯é»', tags: ['å¿…æ‹'], mapQuery: 'ãŠãŸã‚‹æ°´æ—é¤¨', photoTip: 'ä¼éµæ•£æ­¥ç”¨é€£æ‹æ¨¡å¼æ•æ‰èŒç¬é–“' },
      { time: '14:30', name: 'å ºç”ºé€šå•†åº—è¡—', desc: 'åƒè§€éŸ³æ¨‚ç›’å ‚ã€LeTAO æœ¬åº—åƒä¸‹åˆèŒ¶ã€åŒ—ä¸€ç¡å­é¤¨ã€‚', icon: 'ğŸ›', category: 'è³¼ç‰©', tags: ['å¿…è²·'], mapQuery: 'å ºç”ºé€šã‚Š å°æ¨½', photoTip: 'éŸ³æ¨‚ç›’å ‚è’¸æ°£æ™‚é˜å¿…æ‹' },
      { time: '15:30', name: 'ã¿ã£ãµãƒãƒ¼ãŠã‚„ã¤å ‚ å°æ¨½åº—', desc: 'Miffy é»å¿ƒå ‚ï¼ä½åœ¨å ºç”ºé€šä¸Šï¼Œè²©å”® Miffy é€ å‹ç”œé»èˆ‡å‘¨é‚Šå•†å“ã€‚\n\nğŸ“ åœ°å€ï¼šå°æ¨½å¸‚å ºç”º 4-11\nğŸ© å¿…è²·ï¼šMiffy é€ å‹é›è›‹ç³•ã€é™å®šå‘¨é‚Š', icon: 'ğŸ›', category: 'è³¼ç‰©', tags: [], mapQuery: 'ã¿ã£ãµãƒãƒ¼ãŠã‚„ã¤å ‚ å°æ¨½åº—', photoTip: 'Miffy é€ å‹ç”œé»è¶…èŒå¿…æ‹' },
      { time: '16:00', name: 'ä½å‰ç¥ç¤¾', desc: 'å°æ¨½æœ€å¤§çš„ç¥ç¤¾ï¼ŒèŠåš´å¯§éœã€‚å¾å ºç”ºé€šæ­¥è¡Œç´„ 10 åˆ†é˜ã€‚\n\nğŸ“¸ é›ªä¸­åƒé“æ°£æ°›å¹½éœ\nãƒ»çŸ³ç‡ˆç± èˆ‡é³¥å±…åœ¨ç™½é›ªä¸­æ ¼å¤–å£¯è§€\nãƒ»äººæ½®æ¯”åŒ—æµ·é“ç¥å®®å°‘å¾ˆå¤šï¼Œé©åˆéœå¿ƒåƒæ‹œ', icon: 'â›©', category: 'æ™¯é»', tags: [], mapQuery: 'ä½å‰ç¥ç¤¾ å°æ¨½', photoTip: 'é›ªä¸­åƒé“çŸ³ç‡ˆç± ï¼Œæ‹å‡ºå¹½éœæ°›åœ' },
      { time: '17:00', name: 'å°æ¨½é‹æ²³', desc: 'æ‹æ” Blue Hour è—èª¿æ™‚åˆ»çš„é‹æ²³å¤œæ™¯ï¼Œå€‰åº«ç¾¤èˆ‡ç…¤æ°£ç‡ˆæœ€ç¾ã€‚', icon: 'â›©', category: 'æ™¯é»', tags: ['å¿…æ‹'], mapQuery: 'å°æ¨½é‹æ²³', photoTip: 'é»ƒæ˜ 16:30-17:30 æ˜¯ Blue Hour é»ƒé‡‘æ™‚æ®µ' },
      { time: '19:00', name: 'JR è¿”å›æœ­å¹Œ', desc: 'JR è¿”å›æœ­å¹Œè»Šç«™ã€‚', icon: 'ğŸšƒ', category: 'äº¤é€š', tags: [] },
      { time: '20:30', name: 'AOAO SAPPORO', desc: 'ç‹¸å°è·¯ moyuk å¤§æ¨“çš„éƒ½å¸‚æ°´æ—é¤¨ï¼Œç‡Ÿæ¥­åˆ°æ·±å¤œï¼Œæ°£æ°›å¦‚é…’å§ã€‚', icon: 'â›©', category: 'æ™¯é»', tags: [], mapQuery: 'AOAO SAPPORO', photoTip: 'å¤¢å¹»ç‡ˆå…‰æ°´æ¯ç¼¸è¶…å¥½æ‹' },
      { time: '22:00', name: 'ç‹¸å°è·¯å±…é…’å±‹', desc: 'æ¨è–¦ï¼šç‚ (En) æˆ–ä¸²é³¥ï¼ˆå¹³åƒ¹ä¸²ç‡’é€£é–ï¼‰ã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: [], mapQuery: 'ç‚ å±…é…’å±‹ ç‹¸å°è·¯' },
    ]
  },
  {
    day: 4, date: '2/24(äºŒ)', theme: 'åƒæœ¬é³¥å±…å¸ç‹èŸ¹', location: 'åœ“å±±ãƒ»ä¼è¦‹ç¨»è·ãƒ»è—»å²©å±±',
    clothing: 'ç™¼ç†±å…§è¡£ã€ä¸­å±¤åˆ·æ¯›ã€é•·ç‰ˆç¾½çµ¨ã€æš–æš–åŒ…ï¼ˆè—»å²©å±±é ‚æ¥µå†·ï¼‰',
    snowTip: 'è—»å²©å±±é ‚é¢¨å¤§æ°£æº«é©Ÿé™ï¼Œæš–æš–åŒ…è²¼æ»¿',
    spots: [
      { time: '10:00', name: 'åœ“å±±å…¬åœ’æ•£ç­–', desc: 'äº«å—æ—©æ™¨çš„é›ªä¸­æ£®æ—æµ´ï¼Œå¹½éœç™‚ç™’ã€‚', icon: 'â›©', category: 'æ™¯é»', tags: [], mapQuery: 'å††å±±å…¬åœ’ æœ­å¹Œ' },
      { time: '11:30', name: 'åœ“å±±é¬†é¤…åˆé¤', desc: 'æ¨è–¦ Maruyama Pancakeã€‚å‚™æ¡ˆï¼šRojiura Curry Samurai åœ“å±±åº—ã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: [], mapQuery: 'Maruyama Pancake æœ­å¹Œ', photoTip: 'é¬†é¤…å †ç–Šå´æ‹æœ€èª˜äºº' },
      { time: '14:00', name: 'ä¼è¦‹ç¨»è·ç¥ç¤¾', desc: 'é€£ç¶¿ç´…è‰²é³¥å±…åœ¨é›ªåœ°ä¸­è¶…é†’ç›®ï¼ˆIG çˆ†ç´…é»ï¼‰ã€‚å¾åœ“å±±æ­è¨ˆç¨‹è»Šç´„ 10 åˆ†ã€‚', icon: 'â›©', category: 'æ™¯é»', tags: ['å¿…æ‹'], mapQuery: 'ä¼è¦‹ç¨²è·ç¥ç¤¾ æœ­å¹Œ', photoTip: 'ç´…è‰²é³¥å±… Ã— ç™½é›ªå°æ¯”æœ€å¸ç›ï¼Œå¾ä½è§’åº¦æ‹' },
      { time: '16:00', name: 'è—»å²©å±±å¤œæ™¯', desc: 'æ—¥æœ¬æ–°ä¸‰å¤§å¤œæ™¯ä¹‹ä¸€ï¼é–€ç¥¨ç´„ 2,100 æ—¥åœ“ã€‚æ­è¨ˆç¨‹è»Šæˆ–å¸‚é›»è‡³çºœè»Šå£ã€‚', icon: 'â›©', category: 'æ™¯é»', tags: ['å¿…æ‹'], mapQuery: 'ã‚‚ã„ã‚å±±ãƒ­ãƒ¼ãƒ—ã‚¦ã‚§ã‚¤', photoTip: 'æ—¥è½å‰ 30 åˆ†ä¸Šå±±å¯æ‹åˆ°æ¼¸å±¤å¤©ç©º' },
      { time: '19:00', name: 'å±…é…’å±‹ é­šé‡‘', desc: 'ç”Ÿé­šç‰‡è±ªé‚å¥½åƒï¼æˆ–é¸ Hokkaido Robinsonã€‚å»ºè­°è¨‚ä½ã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: ['å¿…åƒ'], mapQuery: 'é­šé‡‘ æœ­å¹Œ è–„é‡', photoTip: 'åˆºèº«èˆ¹ç››è¶…å£¯è§€å¿…æ‹' },
    ]
  },
  {
    day: 5, date: '2/25(ä¸‰)', theme: 'æ‰‹ç¨»æ»‘é›ª Day1', location: 'æ‰‹ç¨»æ»‘é›ªå ´',
    clothing: 'æ»‘é›ªè£å‚™å…¨å¥—ï¼ˆç§Ÿå€Ÿï¼‰ã€ç™¼ç†±è¡£è¤²ã€è­·ç›®é¡ã€é˜²æ°´æ‰‹å¥—',
    snowTip: 'äºŒæœˆä¸‹æ—¬ç²‰é›ªå“è³ªæ¥µä½³ï¼Œé©åˆåˆå­¸è€…',
    spots: [
      { time: '07:15', name: 'æ–¹æ¡ˆä¸€ï¼šè¨ˆç¨‹è»Šè‡³æœ­å¹Œç«™åŒ—å£', desc: 'æœ€æ¨è–¦ 10 äººåœ˜é«”ï¼Œçœæ™‚çœåŠ›ã€‚\n\nğŸš• æ“ä½œæ–¹å¼\nãƒ»07:15 å‰é€é GO æˆ– Uber App å« 3 å°è¨ˆç¨‹è»Š\nã€€ï¼ˆæ—¥æœ¬è¨ˆç¨‹è»Šé€šå¸¸è¼‰ 4 äººï¼Œ10 äººåˆ† 3 å°ï¼‰\nãƒ»App å®šä½æˆ–å‘ŠçŸ¥å¸æ©Ÿï¼šã€Œæœ­å¹Œé§…åŒ—å£ 3ç•ªä¹—ã‚Šå ´ã€\nãƒ»è»Šç¨‹ï¼šç´„ 15-20 åˆ†é˜\nãƒ»è»Šè³‡ï¼šæ¯å°ç´„ 2,000-2,500 æ—¥åœ“\nã€€ï¼ˆæ—©æ™¨é€šå‹¤å°–å³°ï¼Œå»ºè­°é ç®—ç•¥é«˜ï¼‰\n\nâœ… å„ªå‹¢\nãƒ»ç›´æ¥è¼‰åˆ°ç«™ç‰Œé–€å£\nãƒ»ä¸éœ€åœ¨è»Šç«™å…§æ¨è¡Œææ‰¾è·¯\nãƒ»é¿å…é›ªåœ°æ­¥è¡Œæˆ–åœ°éµå°–å³°æ“æ“ ', icon: 'ğŸš•', category: 'äº¤é€š', tags: [], mapQuery: 'æœ­å¹Œé§…åŒ—å£' },
      { time: '07:15', name: 'æ–¹æ¡ˆäºŒï¼šåœ°éµå—åŒ—ç·šè‡³æœ­å¹Œç«™', desc: 'æœ€æº–æ™‚ï¼Œä¸å—è·¯æ³å½±éŸ¿ã€‚\n\nğŸš¶ æ­¥è¡Œè‡³åœ°éµç«™\nãƒ»07:15 å‡ºç™¼ï¼Œæ­¥è¡Œè‡³ã€Œå¹Œå¹³æ©‹ç«™ã€\nãƒ»2 æœˆé›ªåœ°è·¯é¢é›£è¡Œï¼Œè«‹é ç•™å……è¶³æ™‚é–“\n\nğŸš‡ æ­ä¹˜åœ°éµ\nãƒ»å—åŒ—ç·šï¼ˆå¾€éº»ç”Ÿæ–¹å‘ï¼‰\nãƒ»åœ¨ã€Œæœ­å¹Œç«™ã€ä¸‹è»Šï¼ˆè»Šç¨‹ç´„ 8 åˆ†é˜ï¼‰\n\nğŸ¢ ç«™å…§å‹•ç·šï¼ˆé‡è¦ï¼ï¼‰\nãƒ»æ‰¾ã€ŒåŒ—æ”¹æœ­å£ã€å‡ºç«™\nãƒ»æ²¿ã€ŒJR ç·š / æœ­å¹Œç«™åŒ—å£ã€æŒ‡ç¤ºç‰Œèµ°\nãƒ»ç©¿éè¥¿å¤§é€šèµ°åˆ°åº•\nãƒ»èµ°å‡ºã€ŒåŒ—å£ã€é–€å£\nãƒ»å³æŠµé” 3 è™Ÿä¹˜è»Šè™•', icon: 'ğŸš‡', category: 'äº¤é€š', tags: [], mapQuery: 'å¹Œå¹³æ©‹é§…' },
      { time: '08:00', name: 'JR å·´å£«è‡³æ‰‹ç¨»æ»‘é›ªå ´', desc: 'å¾æœ­å¹Œç«™åŒ—å£ 3 è™Ÿä¹˜è»Šè™•æ­ä¹˜ JR å·´å£«ç›´é”æ‰‹ç¨»æ»‘é›ªå ´ã€‚', icon: 'ğŸšŒ', category: 'äº¤é€š', tags: [], mapQuery: 'ã‚µãƒƒãƒãƒ­ãƒ†ã‚¤ãƒã‚¹ã‚­ãƒ¼å ´' },
      { time: '09:30', name: 'ç§Ÿè£å‚™ & æ»‘é›ªèª²ç¨‹', desc: 'æ•™ç·´éœ€æå‰ 2 å€‹æœˆé ç´„ï¼ˆTeine Ski Schoolï¼‰ã€‚1972 å†¬å¥§å ´åœ°ï¼Œé›ªé“é•·ä¸”å¯çœ‹æµ·ã€‚', icon: 'ğŸ¿', category: 'æ´»å‹•', tags: ['å¿…ç©'], photoTip: 'ç”¨ GoPro æˆ–æ‰‹æ©Ÿé˜²æ°´æ®¼éŒ„å½±' },
      { time: '12:30', name: 'é›ªå ´åˆé¤', desc: 'æ¨è–¦ K-Lounge çš„æŠ«è–©æˆ–æ‹‰éºµã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: [], mapQuery: 'ãƒ†ã‚¤ãƒã‚¹ã‚­ãƒ¼å ´ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³' },
      { time: '16:30', name: 'ä¸‹å±±è¿”å›å¸‚å€', desc: 'è¿”å›æœ­å¹Œå¸‚å€ä¼‘æ¯ã€‚', icon: 'ğŸšƒ', category: 'äº¤é€š', tags: [] },
      { time: '18:30', name: 'æº«é‡èœ æ¶®æ¶®é‹', desc: 'è–„é‡åº—æ¶®æ¶®é‹åƒåˆ°é£½ï¼Œè£œå……è”¬èœèˆ‡ç†±é‡ã€‚é ç®— 4,000 æ—¥åœ“ã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: ['å¿…åƒ'], mapQuery: 'ã—ã‚ƒã¶ã—ã‚ƒã¶æ¸©é‡èœ ã™ã™ãã®åº—', photoTip: 'ç«é‹é£Ÿææ“ºç›¤å…¨æ™¯ç…§' },
    ]
  },
  {
    day: 6, date: '2/26(å››)', theme: 'æ‰‹ç¨»æ»‘é›ª Day2', location: 'æ‰‹ç¨»æ»‘é›ªå ´ å¥§æ—åŒ¹äºå€',
    clothing: 'åŒ Day5 æ»‘é›ªè£å‚™ï¼ŒåŠ å¼·ä¿æš–ï¼ˆHighland æ›´é«˜æ›´å†·ï¼‰',
    snowTip: 'å¥§æ—åŒ¹äºå€ æµ·æ‹”è¼ƒé«˜ï¼Œé¢¨é€Ÿå¼·ï¼Œæ³¨æ„é˜²é¢¨',
    spots: [
      { time: '07:45', name: 'ç¬¬ä¸€æ®µï¼šå‰å¾€ JR æœ­å¹Œç«™', desc: 'å…©ç¨®æ–¹å¼æ“‡ä¸€ï¼š\n\nğŸš‡ åœ°éµ\nãƒ»07:45 å‡ºç™¼ï¼Œæ­¥è¡Œè‡³ã€Œå¹Œå¹³æ©‹ç«™ã€\nãƒ»æ­å—åŒ—ç·šè‡³ã€Œæœ­å¹Œç«™ã€ä¸‹è»Š\nãƒ»æ²¿ã€ŒJR ç·šã€æ¨™ç¤ºç§»å‹•\nãƒ»æœ­å¹Œè»Šç«™è¼ƒå¤§ï¼Œé ç•™ 10 åˆ†é˜é€² JR æœˆå°\n\nğŸš• è¨ˆç¨‹è»Šï¼ˆ10 äººåœ˜é«”æ¨è–¦ï¼‰\nãƒ»07:45 åˆ†ä¹˜è¨ˆç¨‹è»Šç›´é” JR æœ­å¹Œç«™\nãƒ»çœåŠ›ï¼Œå…é›ªåœ°æ­¥è¡Œ', icon: 'ğŸš‡', category: 'äº¤é€š', tags: [], mapQuery: 'å¹Œå¹³æ©‹é§…' },
      { time: '08:13', name: 'ç¬¬äºŒæ®µï¼šJR è‡³æ‰‹ç¨»ç«™', desc: 'ğŸšƒ æ­ä¹˜ JR\nãƒ»è»Šæ¬¡ï¼š08:13 å¾€å°æ¨½ï¼æ‰‹ç¨»æ–¹å‘\nãƒ»æŠµé”ï¼š08:30ã€ŒJR æ‰‹ç¨»ç«™ã€', icon: 'ğŸšƒ', category: 'äº¤é€š', tags: [], mapQuery: 'JRæ‰‹ç¨²é§…' },
      { time: '08:40', name: 'ç¬¬ä¸‰æ®µï¼šæ¥é§å·´å£« æ‰‹70', desc: 'ğŸšŒ è½‰ä¹˜å·´å£«\nãƒ»ä¸‹ç«è»Šå¾Œå¾€ã€Œå—å£ã€å‡ºç«™\nãƒ»å‰å¾€ 3 è™Ÿä¹˜è»Šè™•\nãƒ»æ­ 08:40 ç™¼è»Šçš„ JR åŒ—æµ·é“å·´å£«ï¼ˆæ‰‹70ï¼‰\nãƒ»å·´å£«å…ˆåœ Olympia å€ï¼ˆç¬¬ä¸€ç«™ï¼‰', icon: 'ğŸšŒ', category: 'äº¤é€š', tags: [], mapQuery: 'ã‚µãƒƒãƒãƒ­ãƒ†ã‚¤ãƒã‚¹ã‚­ãƒ¼å ´' },
      { time: '09:00', name: 'æ‰‹ç¨»æ»‘é›ªå ´ å¥§æ—åŒ¹äºå€', desc: 'æŠµé”å¥§æ—åŒ¹äºå€ï¼Œé–‹å§‹ç¬¬äºŒå¤©æ»‘é›ªï¼æ­çºœè»Šä¸Šå±±é ‚å¯ä¿¯ç°çŸ³ç‹©ç£æµ·æ™¯ã€‚', icon: 'ğŸ¿', category: 'æ´»å‹•', tags: ['å¿…ç©'], photoTip: 'å±±é ‚ä¿¯ç°çŸ³ç‹©ç£ 180 åº¦å…¨æ™¯' },
      { time: '16:00', name: 'ä¸‹å±±', desc: 'èº«é«”ç— ç—›è€…å¯ææ—©å›å¸‚å€æ³¡æ¹¯ï¼ˆæ¨è–¦ï¼šæ¥µæ¨‚æ¹¯ï¼‰ã€‚', icon: 'ğŸšƒ', category: 'äº¤é€š', tags: [], mapQuery: 'æ¥µæ¥½æ¹¯ æœ­å¹Œ' },
      { time: '18:30', name: 'è‡ªç”±è¦“é£Ÿ', desc: 'ä¿¡ç„æ‹‰éºµã€ç©º (Sora) æ‹‰éºµã€å¸ƒè¢‹ (Hotei) åŒ—æµ·é“ç‚¸é›ã€æˆ–é”æ‘©æˆå‰æ€æ±—çƒ¤è‚‰ã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: [], mapQuery: 'ä¿¡ç„ ãƒ©ãƒ¼ãƒ¡ãƒ³ æœ­å¹Œ' },
    ]
  },
  {
    day: 7, date: '2/27(äº”)', theme: 'è³¼ç‰©è¡€æ‹¼', location: 'ä¸­å³¶å…¬åœ’ãƒ»æ ¹å®¤èŠ±ä¸¸ãƒ»BicCameraãƒ»å”å‰è¨¶å¾·',
    clothing: 'è¼•ä¾¿ä¿æš–å³å¯ï¼Œå®¤å…§è³¼ç‰©ç‚ºä¸»',
    snowTip: 'è³¼ç‰©æ—¥ä»¥å®¤å…§ç‚ºä¸»ï¼Œä½†è½‰å ´æ™‚æ³¨æ„è·¯é¢ç©é›ª',
    spots: [
      { time: '10:00', name: 'ä¸­å³¶å…¬åœ’', desc: 'æ°‘å®¿é™„è¿‘æ•£æ­¥ï¼Œåƒè§€è±å¹³é¤¨ã€‚å†¬å­£éŠ€ç™½ä¸–ç•Œéå¸¸å¹½éœã€‚', icon: 'â›©', category: 'æ™¯é»', tags: [], mapQuery: 'ä¸­å³¶å…¬åœ’ æœ­å¹Œ', photoTip: 'é›ªç™½å…¬åœ’éŠ€ææ­¥é“å¦‚å¤¢ä¼¼å¹»' },
      { time: '11:30', name: 'æ ¹å®¤èŠ±ä¸¸ è¿´è½‰å£½å¸', desc: 'æœ­å¹Œè»Šç«™ Stellar Placeã€‚éå¸¸ç†±é–€ï¼å»ºè­° 11:00 å‰æŠ½è™Ÿç¢¼ç‰Œã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: ['å¿…åƒ'], mapQuery: 'æ ¹å®¤èŠ±ã¾ã‚‹ JRã‚¿ãƒ¯ãƒ¼ã‚¹ãƒ†ãƒ©ãƒ—ãƒ¬ã‚¤ã‚¹åº—', photoTip: 'è¿´è½‰å£½å¸çš„ç²¾ç¾å£½å¸ç‰¹å¯«' },
      { time: '13:30', name: 'BicCamera é›»å™¨', desc: 'çµå¸³å‡ºç¤º 10%å…ç¨…+7%æŠ˜æ‰£åˆ¸ã€‚ç›®æ¨™ï¼šå¹é¢¨æ©Ÿã€ä¿æº«ç“¶ã€é›»å™¨ã€‚', icon: 'ğŸ›', category: 'è³¼ç‰©', tags: ['å¿…è²·'], mapQuery: 'ãƒ“ãƒƒã‚¯ã‚«ãƒ¡ãƒ© æœ­å¹Œé§…å‰' },
      { time: '15:30', name: 'å”å‰è¨¶å¾·', desc: 'ç‹¸å°è·¯åº—ã€‚æ»¿ 3 è¬æ—¥åœ“å‡ºç¤ºå…ç¨…+æŠ˜æ‰£åˆ¸ã€‚ç›®æ¨™ï¼šè—¥å¦ã€é›¶é£Ÿã€ä¼´æ‰‹ç¦®ã€‚', icon: 'ğŸ›', category: 'è³¼ç‰©', tags: ['å¿…è²·'], mapQuery: 'ãƒ‰ãƒ³ãƒ»ã‚­ãƒ›ãƒ¼ãƒ† ç‹¸å°è·¯' },
      { time: '19:00', name: 'èŸ¹æœ¬å®¶ æ™šé¤', desc: 'ç²¾ç·»èƒèŸ¹æœƒå¸­ï¼æ¨è–¦ï¼šé›ªèŸ¹ç«é‹ Ã—4ã€ç‚¸å¥¶æ²¹èŸ¹å¯æ¨‚é¤… Ã—4ã€èŸ¹è‚‰å£½å¸ Ã—1ã€ç±³ç²¥ Ã—4ã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: ['å¿…åƒ'], mapQuery: 'ã‹ã«æœ¬å®¶ æœ­å¹Œé§…å‰æœ¬åº—', photoTip: 'èƒèŸ¹æœƒå¸­å…¨æ™¯ + ç‰¹å¯«èŸ¹è…¿' },
    ]
  },
  {
    day: 8, date: '2/28(å…­)', theme: 'æ©Ÿå ´è¡åˆº', location: 'æ–°åƒæ­²æ©Ÿå ´',
    clothing: 'èˆ’é©æ–¹ä¾¿ç©¿è„«å³å¯ï¼Œæ©Ÿå ´å®¤å…§æº«æš–',
    snowTip: 'æ³¨æ„å¤©æ°£é å ±ç¢ºèª JR æ˜¯å¦æ­£å¸¸é‹è¡Œ',
    spots: [
      { time: '09:30', name: 'é€€æˆ¿ & å‡ºç™¼', desc: 'åˆ†ä¹˜è¨ˆç¨‹è»Šè‡³æœ­å¹Œç«™ â†’ JR å¿«é€Ÿ Airport è™Ÿ â†’ æ–°åƒæ­²æ©Ÿå ´ã€‚', icon: 'ğŸšƒ', category: 'äº¤é€š', tags: [], mapQuery: 'æœ­å¹Œé§…' },
      { time: '11:00', name: 'æŠµé”æ–°åƒæ­²æ©Ÿå ´', desc: 'å…ˆè‡³åœ‹éš›ç·šæ«ƒå°è¨—é‹æˆ–å¯„æ”¾è¡Œæï¼Œå†å»åœ‹å…§ç·šé€›è¡—ã€‚', icon: 'âœˆï¸', category: 'äº¤é€š', tags: [] },
      { time: '11:30', name: 'Royce å·§å…‹åŠ›ä¸–ç•Œ', desc: 'åœ‹å…§ç·š 3Fï¼Œå¿…è²· Royce ç”Ÿå·§å…‹åŠ›ï¼', icon: 'ğŸ›', category: 'è³¼ç‰©', tags: ['å¿…è²·'], mapQuery: 'ãƒ­ã‚¤ã‚ºãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆãƒ¯ãƒ¼ãƒ«ãƒ‰ æ–°åƒæ­³ç©ºæ¸¯', photoTip: 'å·§å…‹åŠ›ç€‘å¸ƒ + å·¥å» ç”¢ç·šè¶…å¥½æ‹' },
      { time: '12:00', name: 'æ‹‰éºµé“å ´', desc: 'åœ‹å…§ç·š 3Fï¼Œåƒæœ€å¾Œä¸€ç¢—æ‹‰éºµï¼æ¨è–¦ï¼šä¸€å¹»é®®è¦æ‹‰éºµã€‚', icon: 'ğŸœ', category: 'é£Ÿç‰©', tags: ['å¿…åƒ'], mapQuery: 'åŒ—æµ·é“ãƒ©ãƒ¼ãƒ¡ãƒ³é“å ´ æ–°åƒæ­³ç©ºæ¸¯' },
      { time: '13:00', name: 'åœŸç”¢åº—æƒè²¨', desc: 'åœ‹å…§ç·š 2Fï¼šå…­èŠ±äº­ã€åŒ—è“æ¨“ã€LeTAOã€è–¯æ¢ä¸‰å…„å¼Ÿï¼Œä¿é®®æœŸæœ€æ–°ã€‚', icon: 'ğŸ›', category: 'è³¼ç‰©', tags: ['å¿…è²·'], mapQuery: 'æ–°åƒæ­³ç©ºæ¸¯ ãŠåœŸç”£' },
      { time: '15:30', name: 'å®‰æª¢ & å‡ºå¢ƒ', desc: 'é…·èˆª TR893 17:30 èµ·é£›ã€‚æå‰ 2 å°æ™‚è¾¦ç†ç™»æ©Ÿæ‰‹çºŒã€‚', icon: 'âœˆï¸', category: 'äº¤é€š', tags: [] },
    ]
  },
];

const PACKING_DATA = {
  'éš¨èº«èƒŒåŒ…': [
    { name: 'è­·ç…§', qty: 1 }, { name: 'æ‰‹æ©Ÿ + å……é›»ç·š', qty: 1 }, { name: 'è¡Œå‹•é›»æº', qty: 1 },
    { name: 'æ—¥åœ“ç¾é‡‘', qty: 1 }, { name: 'ä¿¡ç”¨å¡', qty: 1 }, { name: 'å£ç½©', qty: 5 },
    { name: 'æ¿•ç´™å·¾', qty: 1 }, { name: 'æš–æš–åŒ…', qty: 10 }, { name: 'å”‡è†/è­·æ‰‹éœœ', qty: 1 },
    { name: 'æŠ˜ç–Šå‚˜', qty: 1 }, { name: 'æ—…éŠä¿éšªæ–‡ä»¶', qty: 1 },
  ],
  'æ‰‹æè¡Œæ': [
    { name: 'ä¸€å¥—æ›æ´—è¡£ç‰©', qty: 1 }, { name: 'ç›¥æ´—ç”¨å“', qty: 1 }, { name: 'ç­†é›»/å¹³æ¿', qty: 1 },
    { name: 'ç›¸æ©Ÿ', qty: 1 }, { name: 'é ¸æ•', qty: 1 }, { name: 'è€³æ©Ÿ', qty: 1 },
  ],
  'æ‰˜é‹è¡Œæ': [
    { name: 'ç™¼ç†±è¡£', qty: 4 }, { name: 'ç™¼ç†±è¤²', qty: 4 }, { name: 'ç¾½çµ¨å¤–å¥—', qty: 1 },
    { name: 'é˜²æ°´é›ªé´', qty: 1 }, { name: 'æ¯›å¸½', qty: 1 }, { name: 'é˜²æ°´æ‰‹å¥—', qty: 1 },
    { name: 'åœå·¾', qty: 1 }, { name: 'åšè¥ªå­', qty: 5 }, { name: 'ä¸€èˆ¬è¡£è¤²', qty: 4 },
    { name: 'æ³³è¡£ï¼ˆæ³¡æ¹¯ç”¨ï¼‰', qty: 1 }, { name: 'é˜²æ»‘å†°çˆª', qty: 1 }, { name: 'æŠ˜ç–Šè³¼ç‰©è¢‹', qty: 2 },
  ],
  'æ—¥æœ¬è³¼ç‰©æ¸…å–®': [
    { name: 'ç™½è‰²æˆ€äºº', qty: 2 }, { name: 'Royce ç”Ÿå·§å…‹åŠ›', qty: 3 }, { name: 'å…­èŠ±äº­é¤…ä¹¾', qty: 2 },
    { name: 'åŒ—è“æ¨“æ³¡èŠ™', qty: 1 }, { name: 'LeTAO èµ·å¸è›‹ç³•', qty: 1 }, { name: 'è–¯æ¢ä¸‰å…„å¼Ÿ', qty: 3 },
    { name: 'é¦¬æ²¹ç”¢å“', qty: 1 }, { name: 'ä¿æ¿•é¢è†œ', qty: 2 }, { name: 'è—¥å“/è—¥å¦', qty: 1 },
  ],
};

const WEATHER_DATA = [
  { day: 1, date: '2/21', location: 'æœ­å¹Œ', high: -1, low: -6, snow: '70%', depth: '85cm', feels: -9, desc: 'æ™šé–“æŠµé”ï¼Œé™°æœ‰é›ª' },
  { day: 2, date: '2/22', location: 'æœ­å¹Œ', high: 0, low: -5, snow: '50%', depth: '83cm', feels: -7, desc: 'å¤šé›²å¶é›ª' },
  { day: 3, date: '2/23', location: 'å°æ¨½', high: 1, low: -4, snow: '60%', depth: '90cm', feels: -8, desc: 'æµ·é¢¨å‡œå†½ï¼Œé–“æ­‡é™é›ª' },
  { day: 4, date: '2/24', location: 'æœ­å¹Œ', high: 2, low: -3, snow: '40%', depth: '82cm', feels: -6, desc: 'å¤šé›²æ™‚æ™´' },
  { day: 5, date: '2/25', location: 'æ‰‹ç¨»', high: -2, low: -8, snow: '80%', depth: '120cm', feels: -13, desc: 'å±±å€ç²‰é›ªï¼Œæ»‘é›ªæœ€ä½³' },
  { day: 6, date: '2/26', location: 'æ‰‹ç¨»', high: -1, low: -7, snow: '75%', depth: '125cm', feels: -12, desc: 'æŒçºŒé™é›ªï¼Œèƒ½è¦‹åº¦ä¸­ç­‰' },
  { day: 7, date: '2/27', location: 'æœ­å¹Œ', high: 1, low: -4, snow: '30%', depth: '80cm', feels: -6, desc: 'é™°å¤©ï¼Œé©åˆè³¼ç‰©' },
  { day: 8, date: '2/28', location: 'æ–°åƒæ­²', high: 0, low: -5, snow: '45%', depth: '78cm', feels: -7, desc: 'å¤šé›²ï¼Œäº¤é€šæ­£å¸¸' },
];

const TRAVEL_RULES = [
  { title: 'ğŸ—‘ åƒåœ¾åˆ†é¡', items: ['å¯ç‡ƒåƒåœ¾ï¼šé£Ÿç‰©æ®˜æ¸£ã€ç´™å·¾ã€å¡‘è† è¢‹', 'ä¸å¯ç‡ƒåƒåœ¾ï¼šé‡‘å±¬ã€ç»ç’ƒã€é™¶ç“·', 'è³‡æºå›æ”¶ï¼šå¯¶ç‰¹ç“¶ï¼ˆè“‹å­åˆ†é–‹ï¼‰ã€é‹ç½ã€ç´™é¡', 'æ°‘å®¿å°åƒåœ¾åˆ†é¡è¦æ±‚æ¥µåš´ï¼Œè«‹å‹™å¿…éµå®ˆ'] },
  { title: 'ğŸšƒ é›»è»Šç¦®å„€', items: ['èƒŒåŒ…æ”¹ç‚ºå‰èƒŒæˆ–æ”¾è…³é‚Š', 'æ‰‹æ©Ÿè¨­éœéŸ³ï¼Œé¿å…é€šè©±', 'è®“åº§çµ¦è€äººã€å­•å©¦ã€èº«éšœè€…', 'æ’éšŠä¾åºä¸Šè»Šï¼Œå…ˆä¸‹å¾Œä¸Š'] },
  { title: 'ğŸ‘Ÿ å®¤å…§è„«é‹', items: ['é€²å…¥æ°‘å®¿ç„é—œå‹™å¿…è„«é‹', 'éƒ¨åˆ†é¤å»³ï¼ˆæ¦»æ¦»ç±³å¸­ï¼‰ä¹Ÿéœ€è„«é‹', 'ç©¿ä¹¾æ·¨è¥ªå­ï¼Œé¿å…å°·å°¬'] },
  { title: 'ğŸ’° é€€ç¨…è¦ç¯„', items: ['åŒä¸€åº—å®¶ç•¶æ—¥æ¶ˆè²»æ»¿ 5,000 æ—¥åœ“ï¼ˆæœªç¨…ï¼‰å³å¯é€€ç¨…', 'éœ€å‡ºç¤ºè­·ç…§æ­£æœ¬', 'æ¶ˆè€—å“ï¼ˆé£Ÿå“/è—¥å¦ï¼‰æœƒè¢«å¯†å°åŒ…è£', 'é›¢é–‹æ—¥æœ¬å‰ä¸å¯æ‹†å°å¯†å°è¢‹'] },
];

const EMERGENCY_INFO = [
  { label: 'è­¦å¯Ÿ', number: '110', icon: 'ğŸš”' },
  { label: 'æ¶ˆé˜² / æ•‘è­·è»Š', number: '119', icon: 'ğŸš‘' },
  { label: 'é§æ—¥å°åŒ—ç¶“æ¿Ÿæ–‡åŒ–ä»£è¡¨è™•', number: '+81-3-3280-7811', icon: 'ğŸ›', address: 'æ±äº¬éƒ½æ¸¯åŒºç™½é‡‘å°5-20-2' },
  { label: 'æ—…éŠæ€¥é›£æ•‘åŠ©ï¼ˆ24Hï¼‰', number: '+886-800-085-095', icon: 'ğŸ“' },
];

const TRIP_INFO = {
  flight: { outbound: 'é…·èˆª TR893ãƒ»2/21 17:20 æŠµé”æ–°åƒæ­² CTS', inbound: 'é…·èˆª TR893ãƒ»2/28 17:30 èµ·é£›' },
  hotel: { name: 'Gyokeidori Luxury House', address: 'æœ­å¹Œå¸‚å—14æ¡è¥¿6ä¸ç›®', note: 'è¿‘å¸‚é›»ã€Œè¡Œå•Ÿé€šã€ç«™' },
  car: 'è‡ªé§•ç§Ÿè»Šæ†‘è­‰ï¼ˆè«‹ç¢ºèªé›²ç«¯æ–‡ä»¶ï¼‰',
  apps: ['GO / Uberï¼šå«è»Š', 'Japan Travel by NAVITIMEï¼šæŸ¥ JR ç­æ¬¡', 'Google Mapsï¼šå°èˆª'],
};

// ============================================================
// COMPONENTS
// ============================================================

// Snow particles (static data outside component to avoid re-randomizing on re-render)
const SNOW_FLAKES = Array.from({ length: 12 }, (_, i) => ({
  id: i,
  left: Math.random() * 100,
  delay: Math.random() * 8,
  duration: 8 + Math.random() * 6,
  size: 10 + Math.random() * 10,
}));

const DAY_EMOJIS = { 3: 'ğŸ§', 5: 'ğŸ¿', 6: 'ğŸ¿', 8: 'âœˆï¸' };

function SnowParticles() {
  return (
    <div className="fixed inset-0 pointer-events-none z-0">
      {SNOW_FLAKES.map(f => (
        <div key={f.id} className="snowflake" style={{
          left: f.left + '%', animationDelay: f.delay + 's', animationDuration: f.duration + 's', fontSize: f.size + 'px',
        }}>â„</div>
      ))}
    </div>
  );
}

// Header
function Header() {
  return (
    <header className="fixed top-0 left-0 right-0 z-50 glass-dark text-white px-4 py-3 shadow-lg">
      <div className="max-w-lg mx-auto flex items-center justify-between">
        <div>
          <h1 className="text-lg font-bold tracking-wide">â„ï¸ åŒ—æµ·é“é›ªå­£è‡ªç”±è¡Œ</h1>
          <p className="text-xs opacity-80 mt-0.5">2026/02/21 - 02/28 ãƒ» 8å¤©7å¤œ</p>
        </div>
        <div className="text-3xl">â›©</div>
      </div>
    </header>
  );
}

// Bottom Tab Bar
function TabBar({ activeTab, onTabChange }) {
  const tabs = [
    { id: 'itinerary', icon: 'ğŸ—“', label: 'è¡Œç¨‹' },
    { id: 'guide', icon: 'ğŸ“‹', label: 'æŒ‡å—' },
    { id: 'weather', icon: 'ğŸŒ¨', label: 'å¤©æ°£' },
  ];
  return (
    <nav className="fixed bottom-0 left-0 right-0 z-50 glass border-t border-gray-200/50 shadow-lg">
      <div className="max-w-lg mx-auto flex">
        {tabs.map(tab => (
          <button key={tab.id} onClick={() => onTabChange(tab.id)}
            className={`flex-1 flex flex-col items-center py-2.5 btn-press transition-colors ${
              activeTab === tab.id ? 'text-fuji' : 'text-warmgray'
            }`}>
            <span className="text-xl">{tab.icon}</span>
            <span className={`text-xs mt-0.5 font-medium ${activeTab === tab.id ? 'text-fuji' : ''}`}>{tab.label}</span>
            {activeTab === tab.id && <div className="w-6 h-0.5 bg-fuji rounded-full mt-1" />}
          </button>
        ))}
      </div>
    </nav>
  );
}

// Tag component
function Tag({ label }) {
  const colors = {
    'å¿…åƒ': 'bg-yuzu/20 text-yuzu border-yuzu/30',
    'å¿…è²·': 'bg-matcha/20 text-matcha border-matcha/30',
    'å¿…æ‹': 'bg-sakura/20 text-sakura border-sakura/30',
    'å¿…ç©': 'bg-fuji/20 text-fuji border-fuji/30',
  };
  return (
    <span className={`inline-block text-xs px-2 py-0.5 rounded-full border font-medium ${colors[label] || 'bg-gray-100 text-gray-500 border-gray-200'}`}>
      {label}
    </span>
  );
}

// Spot Card
function SpotCard({ spot }) {
  const [expanded, setExpanded] = useState(false);

  const categoryColors = {
    'é£Ÿç‰©': 'border-l-yuzu', 'æ´»å‹•': 'border-l-fuji', 'è³¼ç‰©': 'border-l-matcha',
    'æ™¯é»': 'border-l-sakura', 'é…’åº—': 'border-l-purple-400', 'äº¤é€š': 'border-l-warmgray',
  };

  return (
    <div className={`bg-white rounded-2xl shadow-md border-l-4 ${categoryColors[spot.category] || 'border-l-gray-300'} overflow-hidden transition-all duration-300 btn-press`}
      onClick={() => setExpanded(!expanded)}>
      <div className="p-3.5">
        <div className="flex items-start justify-between">
          <div className="flex-1">
            <div className="flex items-center gap-2 mb-1">
              <span className="text-sm text-warmgray font-medium">{spot.time}</span>
              <span className="text-lg">{spot.icon}</span>
              {spot.tags.map(t => <Tag key={t} label={t} />)}
            </div>
            <h4 className="font-bold text-gray-800 text-sm">{spot.name}</h4>
          </div>
          <span className={`text-warmgray text-xs transition-transform duration-300 ${expanded ? 'rotate-180' : ''}`}>â–¼</span>
        </div>

        {expanded && (
          <div className="mt-3 fade-in">
            <p className="text-sm text-gray-600 leading-relaxed whitespace-pre-line">{spot.desc}</p>

            <div className="flex flex-wrap gap-2 mt-3">
              {spot.mapQuery && (
                <a href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(spot.mapQuery)}`}
                  target="_blank" rel="noopener noreferrer"
                  className="inline-flex items-center gap-1 text-xs bg-fuji/10 text-fuji px-3 py-1.5 rounded-full font-medium btn-press"
                  onClick={e => e.stopPropagation()}>
                  ğŸ“ å°èˆª
                </a>
              )}
            </div>

            {spot.photoTip && (
              <div className="mt-2 p-2 bg-sakura/10 rounded-xl">
                <p className="text-xs text-sakura font-medium">ğŸ“¸ {spot.photoTip}</p>
              </div>
            )}
          </div>
        )}
      </div>
    </div>
  );
}

// Nearby Meals component
const MEAL_TYPE_LABELS = { lunch: 'åˆé¤', dinner: 'æ™šé¤', dinner2: 'æ™šé¤å‚™æ¡ˆ', dessert: 'ç”œé» / ä¸‹åˆèŒ¶', late_night: 'æ·±å¤œç”œé»' };

function NearbyMeals({ dayNum }) {
  const [expanded, setExpanded] = useState(false);

  const dayMeals = MEALS_DATA[String(dayNum)];
  if (!dayMeals) return null;

  const mealEntries = Object.entries(dayMeals);
  if (mealEntries.length === 0) return null;

  return (
    <div className="mt-4 bg-white rounded-2xl shadow-md border-l-4 border-l-yuzu overflow-hidden">
      <button onClick={() => setExpanded(!expanded)}
        className="w-full flex items-center justify-between p-4 btn-press">
        <span className="font-bold text-gray-800 text-sm flex items-center gap-2">ğŸ½ é™„è¿‘ç¾é£Ÿé¸æ“‡</span>
        <span className={`text-warmgray text-xs transition-transform duration-300 ${expanded ? 'rotate-180' : ''}`}>â–¼</span>
      </button>
      {expanded && (
        <div className="px-4 pb-4 fade-in">
          {mealEntries.map(([type, meal]) => (
              <div key={type} className="mb-4 last:mb-0">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-xs font-bold text-fuji bg-fuji/10 px-2 py-0.5 rounded-full">{MEAL_TYPE_LABELS[type] || type}</span>
                  <span className="text-xs text-warmgray">{meal.area}</span>
                </div>
                <div className="space-y-2">
                  {meal.picks.map((pick, i) => (
                    <div key={i} className="flex items-center justify-between p-2.5 bg-gray-50 rounded-xl">
                      <div className="flex-1 min-w-0">
                        <div className="flex items-center gap-2 flex-wrap">
                          <span className="text-sm font-medium text-gray-800">{pick.name}</span>
                          {pick.tag && <span className="text-xs bg-yuzu/20 text-yuzu border border-yuzu/30 px-1.5 py-0.5 rounded-full font-medium">{pick.tag}</span>}
                        </div>
                        <p className="text-xs text-warmgray mt-0.5">{pick.note}</p>
                      </div>
                      {pick.mapQuery && (
                        <a href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(pick.mapQuery)}`}
                          target="_blank" rel="noopener noreferrer"
                          className="flex-shrink-0 ml-2 w-8 h-8 bg-fuji/10 text-fuji rounded-full flex items-center justify-center btn-press"
                          onClick={e => e.stopPropagation()}>
                          ğŸ“
                        </a>
                      )}
                    </div>
                  ))}
                </div>
              </div>
            ))}
        </div>
      )}
    </div>
  );
}

// ============================================================
// TAB: ITINERARY
// ============================================================
function ItineraryTab() {
  const [selectedDay, setSelectedDay] = useState(1);
  const scrollRef = useRef(null);
  const dayData = TRIP_DAYS.find(d => d.day === selectedDay);

  useEffect(() => {
    const btn = scrollRef.current?.children[selectedDay - 1];
    btn?.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
  }, [selectedDay]);

  return (
    <div className="fade-in">
      {/* Day selector */}
      <div className="sticky top-[60px] z-30 glass py-3 px-2 -mx-4">
        <div className="day-scroll flex gap-2 px-2" ref={scrollRef}>
          {TRIP_DAYS.map(d => (
            <button key={d.day} onClick={() => setSelectedDay(d.day)}
              className={`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium btn-press transition-all whitespace-nowrap ${
                selectedDay === d.day
                  ? 'bg-fuji text-white shadow-md shadow-fuji/30'
                  : 'bg-white text-gray-600 shadow-sm hover:bg-fuji/5'
              }`}>
              <span className="block text-xs opacity-75">{d.date}</span>
              <span>Day {d.day}</span>
            </button>
          ))}
        </div>
      </div>

      {/* Day content */}
      {dayData && (
        <div className="mt-4 slide-up" key={selectedDay}>
          {/* Day header */}
          <div className="bg-gradient-to-r from-fuji to-fuji-dark text-white rounded-2xl p-4 mb-4 shadow-lg">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-xs opacity-80">Day {dayData.day} ãƒ» {dayData.date}</p>
                <h3 className="text-xl font-bold mt-1">{dayData.theme}</h3>
                <p className="text-sm opacity-80 mt-1">ğŸ“ {dayData.location}</p>
              </div>
              <div className="text-4xl">{DAY_EMOJIS[dayData.day] || 'â„ï¸'}</div>
            </div>
          </div>

          {/* Spots */}
          <div className="space-y-3">
            {dayData.spots.map((spot, idx) => (
              <SpotCard key={`${selectedDay}-${spot.time}-${spot.name}`} spot={spot} />
            ))}
          </div>

          {/* Nearby Meals */}
          <NearbyMeals dayNum={selectedDay} />

          {/* Clothing & Snow */}
          <div className="mt-4 bg-white rounded-2xl shadow-md p-4">
            <h4 className="font-bold text-gray-800 text-sm flex items-center gap-2">ğŸ‘— å»ºè­°ç©¿è‘— & é›ªæ³</h4>
            <p className="text-sm text-gray-600 mt-2">ğŸ§¥ {dayData.clothing}</p>
            <p className="text-sm text-gray-600 mt-1">ğŸŒ¨ {dayData.snowTip}</p>
          </div>
        </div>
      )}
    </div>
  );
}

// ============================================================
// TAB: GUIDE
// ============================================================
function PackingList() {
  const [activeCategory, setActiveCategory] = useState('éš¨èº«èƒŒåŒ…');
  const [items, setItems] = useState(() => {
    try {
      const saved = localStorage.getItem('packing_items');
      return saved ? JSON.parse(saved) : Object.fromEntries(
        Object.entries(PACKING_DATA).map(([cat, list]) => [cat, list.map(item => ({ ...item, checked: false }))])
      );
    } catch {
      return Object.fromEntries(
        Object.entries(PACKING_DATA).map(([cat, list]) => [cat, list.map(item => ({ ...item, checked: false }))])
      );
    }
  });
  const [newItemName, setNewItemName] = useState('');

  useEffect(() => {
    const timer = setTimeout(() => {
      try {
        localStorage.setItem('packing_items', JSON.stringify(items));
      } catch (err) {
        console.warn('Failed to save packing list:', err);
      }
    }, 300);
    return () => clearTimeout(timer);
  }, [items]);

  const toggleCheck = (idx) => {
    const updated = { ...items, [activeCategory]: items[activeCategory].map((item, i) =>
      i === idx ? { ...item, checked: !item.checked } : item
    )};
    setItems(updated);
  };

  const adjustQty = (idx, delta) => {
    const updated = { ...items, [activeCategory]: items[activeCategory].map((item, i) =>
      i === idx ? { ...item, qty: Math.max(0, item.qty + delta) } : item
    )};
    setItems(updated);
  };

  const addItem = () => {
    if (!newItemName.trim()) return;
    const updated = { ...items, [activeCategory]: [...items[activeCategory], { name: newItemName.trim(), qty: 1, checked: false }] };
    setItems(updated);
    setNewItemName('');
  };

  const removeItem = (idx) => {
    const updated = { ...items, [activeCategory]: items[activeCategory].filter((_, i) => i !== idx) };
    setItems(updated);
  };

  const categories = Object.keys(items);
  const currentItems = items[activeCategory] || [];
  const checkedCount = currentItems.filter(i => i.checked).length;

  return (
    <div className="bg-white rounded-2xl shadow-md overflow-hidden">
      {/* Category tabs */}
      <div className="day-scroll flex border-b border-gray-100">
        {categories.map(cat => (
          <button key={cat} onClick={() => setActiveCategory(cat)}
            className={`flex-shrink-0 px-4 py-3 text-xs font-medium transition-colors whitespace-nowrap ${
              activeCategory === cat ? 'text-fuji border-b-2 border-fuji bg-fuji/5' : 'text-warmgray'
            }`}>
            {cat}
          </button>
        ))}
      </div>

      {/* Progress */}
      <div className="px-4 pt-3">
        <div className="flex items-center justify-between text-xs text-warmgray mb-1">
          <span>{checkedCount}/{currentItems.length} å·²å®Œæˆ</span>
          <span>{currentItems.length > 0 ? Math.round(checkedCount / currentItems.length * 100) : 0}%</span>
        </div>
        <div className="h-1.5 bg-gray-100 rounded-full overflow-hidden">
          <div className="h-full bg-gradient-to-r from-fuji to-matcha rounded-full transition-all duration-500"
            style={{ width: `${currentItems.length > 0 ? (checkedCount / currentItems.length * 100) : 0}%` }} />
        </div>
      </div>

      {/* Items */}
      <div className="p-4 space-y-2">
        {currentItems.map((item, idx) => (
          <div key={idx} className={`flex items-center gap-3 p-2.5 rounded-xl transition-colors ${item.checked ? 'bg-matcha/10' : 'bg-gray-50'}`}>
            <input type="checkbox" checked={item.checked} onChange={() => toggleCheck(idx)} className="custom-check" />
            <span className={`flex-1 text-sm ${item.checked ? 'line-through text-warmgray' : 'text-gray-700'}`}>{item.name}</span>
            <div className="flex items-center gap-1">
              <button onClick={() => adjustQty(idx, -1)} className="w-7 h-7 rounded-full bg-gray-200 text-gray-600 text-sm flex items-center justify-center btn-press">âˆ’</button>
              <span className="text-sm font-medium w-6 text-center">{item.qty}</span>
              <button onClick={() => adjustQty(idx, 1)} className="w-7 h-7 rounded-full bg-fuji/10 text-fuji text-sm flex items-center justify-center btn-press">+</button>
            </div>
            <button onClick={() => removeItem(idx)} className="text-red-400 text-lg btn-press ml-1">Ã—</button>
          </div>
        ))}

        {/* Add new item */}
        <div className="flex gap-2 mt-3">
          <input type="text" value={newItemName} onChange={e => setNewItemName(e.target.value)}
            placeholder="æ–°å¢é …ç›®..." onKeyDown={e => e.key === 'Enter' && addItem()}
            className="flex-1 px-3 py-2 rounded-xl bg-gray-50 border border-gray-200 text-sm focus:outline-none focus:border-fuji focus:ring-1 focus:ring-fuji/30" />
          <button onClick={addItem} className="px-4 py-2 bg-fuji text-white rounded-xl text-sm font-medium btn-press shadow-md shadow-fuji/20">æ–°å¢</button>
        </div>
      </div>
    </div>
  );
}

function GuideTab() {
  const [openSection, setOpenSection] = useState(null);
  const toggle = (id) => setOpenSection(openSection === id ? null : id);

  return (
    <div className="fade-in space-y-4">
      {/* Packing List */}
      <div>
        <button onClick={() => toggle('packing')} className="w-full flex items-center justify-between bg-white rounded-2xl shadow-md p-4 btn-press">
          <span className="font-bold text-gray-800 flex items-center gap-2">ğŸ§³ è¡Œææ‰“åŒ…æ¸…å–®</span>
          <span className={`text-warmgray transition-transform duration-300 ${openSection === 'packing' ? 'rotate-180' : ''}`}>â–¼</span>
        </button>
        {openSection === 'packing' && <div className="mt-2 fade-in"><PackingList /></div>}
      </div>

      {/* Travel Rules */}
      <div>
        <button onClick={() => toggle('rules')} className="w-full flex items-center justify-between bg-white rounded-2xl shadow-md p-4 btn-press">
          <span className="font-bold text-gray-800 flex items-center gap-2">ğŸ‡¯ğŸ‡µ æ—¥æœ¬æ—…éŠè¦ç¯„</span>
          <span className={`text-warmgray transition-transform duration-300 ${openSection === 'rules' ? 'rotate-180' : ''}`}>â–¼</span>
        </button>
        {openSection === 'rules' && (
          <div className="mt-2 space-y-3 fade-in">
            {TRAVEL_RULES.map((rule, i) => (
              <div key={i} className="bg-white rounded-2xl shadow-md p-4">
                <h4 className="font-bold text-sm text-gray-800 mb-2">{rule.title}</h4>
                <ul className="space-y-1.5">
                  {rule.items.map((item, j) => (
                    <li key={j} className="text-sm text-gray-600 flex items-start gap-2">
                      <span className="text-fuji mt-0.5">â€¢</span>{item}
                    </li>
                  ))}
                </ul>
              </div>
            ))}
          </div>
        )}
      </div>

      {/* Emergency */}
      <div>
        <button onClick={() => toggle('emergency')} className="w-full flex items-center justify-between bg-white rounded-2xl shadow-md p-4 btn-press">
          <span className="font-bold text-gray-800 flex items-center gap-2">ğŸ†˜ ç·Šæ€¥è³‡è¨Š</span>
          <span className={`text-warmgray transition-transform duration-300 ${openSection === 'emergency' ? 'rotate-180' : ''}`}>â–¼</span>
        </button>
        {openSection === 'emergency' && (
          <div className="mt-2 space-y-2 fade-in">
            {EMERGENCY_INFO.map((info, i) => (
              <div key={i} className="bg-white rounded-2xl shadow-md p-4 flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <span className="text-2xl">{info.icon}</span>
                  <div>
                    <p className="font-bold text-sm text-gray-800">{info.label}</p>
                    {info.address && <p className="text-xs text-warmgray mt-0.5">{info.address}</p>}
                  </div>
                </div>
                <a href={`tel:${info.number}`}
                  className="px-4 py-2 bg-red-500 text-white rounded-xl text-sm font-bold btn-press shadow-md shadow-red-500/30 flex items-center gap-1">
                  ğŸ“ {info.number}
                </a>
              </div>
            ))}
          </div>
        )}
      </div>

      {/* Trip Info */}
      <div>
        <button onClick={() => toggle('info')} className="w-full flex items-center justify-between bg-white rounded-2xl shadow-md p-4 btn-press">
          <span className="font-bold text-gray-800 flex items-center gap-2">ğŸ“‚ è³‡æ–™ç¸½åŒ¯</span>
          <span className={`text-warmgray transition-transform duration-300 ${openSection === 'info' ? 'rotate-180' : ''}`}>â–¼</span>
        </button>
        {openSection === 'info' && (
          <div className="mt-2 bg-white rounded-2xl shadow-md p-4 space-y-4 fade-in">
            {/* Flight */}
            <div>
              <h4 className="font-bold text-sm text-gray-800 flex items-center gap-2 mb-2">âœˆï¸ èˆªç­è³‡è¨Š</h4>
              <div className="space-y-1.5 text-sm text-gray-600">
                <p>ğŸ›« å»ç¨‹ï¼š{TRIP_INFO.flight.outbound}</p>
                <p>ğŸ›¬ å›ç¨‹ï¼š{TRIP_INFO.flight.inbound}</p>
              </div>
            </div>
            {/* Hotel */}
            <div>
              <h4 className="font-bold text-sm text-gray-800 flex items-center gap-2 mb-2">ğŸ¨ ä½å®¿</h4>
              <div className="text-sm text-gray-600 space-y-1">
                <p className="font-medium">{TRIP_INFO.hotel.name}</p>
                <p>{TRIP_INFO.hotel.address}</p>
                <p className="text-xs text-warmgray">{TRIP_INFO.hotel.note}</p>
                <a href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(TRIP_INFO.hotel.name + ' ' + TRIP_INFO.hotel.address)}`}
                  target="_blank" rel="noopener noreferrer"
                  className="inline-flex items-center gap-1 text-xs bg-fuji/10 text-fuji px-3 py-1.5 rounded-full font-medium mt-1">
                  ğŸ“ æŸ¥çœ‹åœ°åœ–
                </a>
              </div>
            </div>
            {/* Apps */}
            <div>
              <h4 className="font-bold text-sm text-gray-800 flex items-center gap-2 mb-2">ğŸ“± å¿…å‚™ APP</h4>
              <ul className="space-y-1">
                {TRIP_INFO.apps.map((app, i) => (
                  <li key={i} className="text-sm text-gray-600 flex items-start gap-2"><span className="text-fuji">â€¢</span>{app}</li>
                ))}
              </ul>
            </div>
            {/* IC Card */}
            <div>
              <h4 className="font-bold text-sm text-gray-800 flex items-center gap-2 mb-2">ğŸ’³ äº¤é€šå¡</h4>
              <p className="text-sm text-gray-600">å¿…å‚™ Kitaca æˆ– iPhone Suica/Pasmoã€‚å¯æ­ JRã€åœ°éµã€å¸‚é›»ã€å·´å£«ï¼Œä¹Ÿèƒ½åœ¨ä¾¿åˆ©å•†åº—ä»˜æ¬¾ã€‚</p>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

// ============================================================
// TAB: WEATHER
// ============================================================
const WMO_CODES = {
  0: { icon: 'â˜€ï¸', desc: 'æ™´å¤©' }, 1: { icon: 'â˜€ï¸', desc: 'å¤§è‡´æ™´æœ—' },
  2: { icon: 'â›…', desc: 'å¤šé›²' }, 3: { icon: 'â˜ï¸', desc: 'é™°å¤©' },
  45: { icon: 'ğŸŒ«', desc: 'éœ§' }, 48: { icon: 'ğŸŒ«', desc: 'éœ§å‡‡' },
  51: { icon: 'ğŸŒ§', desc: 'å°é›¨' }, 53: { icon: 'ğŸŒ§', desc: 'ä¸­é›¨' }, 55: { icon: 'ğŸŒ§', desc: 'å¤§é›¨' },
  56: { icon: 'ğŸŒ§', desc: 'å‡é›¨' }, 57: { icon: 'ğŸŒ§', desc: 'å‡é›¨' },
  61: { icon: 'ğŸŒ§', desc: 'å°é›¨' }, 63: { icon: 'ğŸŒ§', desc: 'ä¸­é›¨' }, 65: { icon: 'ğŸŒ§', desc: 'å¤§é›¨' },
  66: { icon: 'ğŸŒ§', desc: 'å‡é›¨' }, 67: { icon: 'ğŸŒ§', desc: 'å‡é›¨' },
  71: { icon: 'ğŸŒ¨', desc: 'å°é›ª' }, 73: { icon: 'ğŸŒ¨', desc: 'ä¸­é›ª' }, 75: { icon: 'ğŸŒ¨', desc: 'å¤§é›ª' },
  77: { icon: 'ğŸŒ¨', desc: 'é›ªç²’' },
  80: { icon: 'ğŸŒ§', desc: 'é™£é›¨' }, 81: { icon: 'ğŸŒ§', desc: 'é™£é›¨' }, 82: { icon: 'ğŸŒ§', desc: 'å¤§é™£é›¨' },
  85: { icon: 'ğŸŒ¨', desc: 'é™£é›ª' }, 86: { icon: 'ğŸŒ¨', desc: 'å¤§é™£é›ª' },
  95: { icon: 'â›ˆ', desc: 'é›·é›¨' }, 96: { icon: 'â›ˆ', desc: 'å†°é›¹é›·é›¨' }, 99: { icon: 'â›ˆ', desc: 'å†°é›¹é›·é›¨' },
};

const TENKI_LINKS = {
  'æœ­å¹Œ': 'https://tenki.jp/forecast/1/2/1400/1100/',
  'å°æ¨½': 'https://tenki.jp/forecast/1/2/1600/1203/',
  'æ‰‹ç¨»': 'https://tenki.jp/forecast/1/2/1400/1100/',
  'æ–°åƒæ­²': 'https://tenki.jp/forecast/1/2/1400/1100/',
};

function getClothingAdvice(dayNum, high, low) {
  if (dayNum === 5 || dayNum === 6) return 'æ»‘é›ªå…¨å¥—è£å‚™ + è­·ç›®é¡ + é˜²æ°´æ‰‹å¥—';
  const avg = (high + low) / 2;
  if (avg <= -8) return 'ç¾½çµ¨è¡£ + ç™¼ç†±è¡£ + é›ªé´ + æ¯›å¸½ + åœå·¾ + æš–æš–åŒ…';
  return 'é•·ç‰ˆç¾½çµ¨å¤–å¥— + ç™¼ç†±è¡£ + é˜²æ»‘é‹ + æš–æš–åŒ…';
}

function WeatherTab() {
  const [liveWeather, setLiveWeather] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(false);

  useEffect(() => {
    const url = 'https://api.open-meteo.com/v1/forecast?latitude=43.06&longitude=141.35&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max,snowfall_sum,wind_speed_10m_max,weather_code&timezone=Asia/Tokyo&start_date=2026-02-21&end_date=2026-02-28';
    fetch(url)
      .then(res => { if (!res.ok) throw new Error('API error'); return res.json(); })
      .then(data => {
        const days = data.daily.time.map((date, i) => ({
          day: i + 1,
          date: date.slice(5).replace('-', '/'),
          location: WEATHER_DATA[i]?.location || 'æœ­å¹Œ',
          high: Math.round(data.daily.temperature_2m_max[i]),
          low: Math.round(data.daily.temperature_2m_min[i]),
          precipProb: data.daily.precipitation_probability_max[i],
          snowfall: data.daily.snowfall_sum[i],
          windSpeed: Math.round(data.daily.wind_speed_10m_max[i]),
          weatherCode: data.daily.weather_code[i],
        }));
        setLiveWeather(days);
        setLoading(false);
      })
      .catch(() => { setError(true); setLoading(false); });
  }, []);

  const weatherCards = liveWeather || WEATHER_DATA.map(w => ({
    day: w.day, date: w.date, location: w.location,
    high: w.high, low: w.low,
    precipProb: parseInt(w.snow), snowfall: null, windSpeed: null,
    weatherCode: null, fallback: true,
    feels: w.feels, depth: w.depth, desc: w.desc,
  }));

  return (
    <div className="fade-in space-y-4">
      {loading && (
        <div className="bg-white rounded-2xl shadow-md p-8 text-center">
          <div className="animate-spin text-3xl mb-2">ğŸŒ¨</div>
          <p className="text-sm text-warmgray">æ­£åœ¨å–å¾—å³æ™‚å¤©æ°£è³‡æ–™...</p>
        </div>
      )}

      {error && (
        <div className="bg-yuzu/10 border border-yuzu/30 rounded-2xl p-3 text-center">
          <p className="text-xs text-yuzu font-medium">ç„¡æ³•é€£ç·šå¤©æ°£ APIï¼Œé¡¯ç¤ºé ä¼°è³‡æ–™</p>
        </div>
      )}

      {!loading && weatherCards.map(w => {
        const wmo = WMO_CODES[w.weatherCode] || { icon: 'ğŸŒ¨', desc: w.desc || '---' };
        const tenkiUrl = TENKI_LINKS[w.location] || TENKI_LINKS['æœ­å¹Œ'];

        return (
          <div key={w.day} className="bg-white rounded-2xl shadow-md overflow-hidden">
            <div className="bg-gradient-to-r from-fuji/10 to-transparent p-4">
              <div className="flex items-center justify-between">
                <div>
                  <p className="text-xs text-warmgray font-medium">Day {w.day} ãƒ» {w.date}</p>
                  <h4 className="font-bold text-gray-800 mt-0.5">{w.location}</h4>
                  <p className="text-xs text-warmgray mt-1">{wmo.icon} {w.fallback ? w.desc : wmo.desc}</p>
                </div>
                <div className="text-right">
                  <p className="text-3xl">{wmo.icon}</p>
                  <p className="text-2xl font-bold text-fuji">{w.high}Â°</p>
                  <p className="text-sm text-warmgray">{w.low}Â°C</p>
                </div>
              </div>
            </div>
            <div className="grid grid-cols-3 gap-2 p-3">
              <div className="text-center p-2 bg-blue-50 rounded-xl">
                <p className="text-lg">ğŸŒ§</p>
                <p className="text-xs text-warmgray mt-0.5">é™æ°´æ©Ÿç‡</p>
                <p className="text-sm font-bold text-gray-700">{w.precipProb != null ? w.precipProb + '%' : '---'}</p>
              </div>
              <div className="text-center p-2 bg-blue-50 rounded-xl">
                <p className="text-lg">â„ï¸</p>
                <p className="text-xs text-warmgray mt-0.5">é™é›ªé‡</p>
                <p className="text-sm font-bold text-gray-700">{w.snowfall != null ? w.snowfall.toFixed(1) + 'cm' : (w.depth || '---')}</p>
              </div>
              <div className="text-center p-2 bg-blue-50 rounded-xl">
                <p className="text-lg">ğŸ’¨</p>
                <p className="text-xs text-warmgray mt-0.5">æœ€å¤§é¢¨é€Ÿ</p>
                <p className="text-sm font-bold text-gray-700">{w.windSpeed != null ? w.windSpeed + 'km/h' : (w.feels != null ? w.feels + 'Â°C é«”æ„Ÿ' : '---')}</p>
              </div>
            </div>
            <div className="px-4 pb-3 space-y-2">
              <p className="text-xs text-gray-500">ğŸ‘— ç©¿è‘—å»ºè­°ï¼š{getClothingAdvice(w.day, w.high, w.low)}</p>
              <a href={tenkiUrl} target="_blank" rel="noopener noreferrer"
                className="inline-flex items-center gap-1 text-xs bg-fuji/10 text-fuji px-3 py-1.5 rounded-full font-medium btn-press">
                ğŸ”— æŸ¥çœ‹ tenki.jp è©³ç´°é å ±
              </a>
            </div>
          </div>
        );
      })}

      {!loading && !liveWeather && (
        <p className="text-xs text-center text-warmgray">* ä»¥ä¸Šç‚ºå‡ºç™¼å‰é ä¼°è³‡æ–™ï¼Œå¯¦éš›å¤©æ°£è«‹ä»¥å³æ™‚é å ±ç‚ºæº–</p>
      )}

      {/* SVG Route Map */}
      <div className="bg-white rounded-2xl shadow-md p-4">
        <h4 className="font-bold text-gray-800 text-sm flex items-center gap-2 mb-3">ğŸ—º è·¯ç·šåœ°åœ–</h4>
        <svg viewBox="0 0 400 320" className="w-full" xmlns="http://www.w3.org/2000/svg">
          {/* Hokkaido outline (simplified) */}
          <path d="M80,60 Q100,30 150,25 Q200,20 250,30 Q300,40 340,70 Q360,90 355,130 Q350,160 330,180 Q310,200 280,210 Q260,220 240,230 Q220,250 200,260 Q180,270 150,260 Q120,250 100,230 Q80,210 70,180 Q60,150 65,120 Q68,90 80,60 Z"
            fill="#E8F4FD" stroke="#4A6FA5" strokeWidth="2" />

          {/* Route lines */}
          <path d="M200,150 L130,120" stroke="#4A6FA5" strokeWidth="2" strokeDasharray="6,3" fill="none" />
          <path d="M200,150 L250,100" stroke="#4A6FA5" strokeWidth="2" strokeDasharray="6,3" fill="none" />
          <path d="M200,150 L180,200" stroke="#4A6FA5" strokeWidth="2" strokeDasharray="6,3" fill="none" />
          <path d="M200,150 L280,170" stroke="#4A6FA5" strokeWidth="2" strokeDasharray="6,3" fill="none" />

          {/* City markers */}
          {[
            { x: 200, y: 150, label: 'æœ­å¹Œ', emoji: 'ğŸ ', main: true },
            { x: 130, y: 120, label: 'å°æ¨½', emoji: 'ğŸ§' },
            { x: 250, y: 100, label: 'æ‰‹ç¨»', emoji: 'ğŸ¿' },
            { x: 280, y: 170, label: 'æ–°åƒæ­²', emoji: 'âœˆï¸' },
            { x: 180, y: 200, label: 'è—»å²©å±±', emoji: 'ğŸŒƒ' },
          ].map((city, i) => (
            <g key={i}>
              <circle cx={city.x} cy={city.y} r={city.main ? 12 : 8} fill={city.main ? '#4A6FA5' : '#E8A0BF'} stroke="white" strokeWidth="2" />
              <text x={city.x} y={city.y + 4} textAnchor="middle" fontSize="10" fill="white">{city.emoji}</text>
              <text x={city.x} y={city.y + (city.main ? 24 : 20)} textAnchor="middle" fontSize="11" fill="#333" fontWeight="bold" fontFamily="Zen Maru Gothic">{city.label}</text>
            </g>
          ))}

          {/* Snow decoration */}
          {[{ x: 100, y: 60 }, { x: 300, y: 50 }, { x: 320, y: 140 }, { x: 90, y: 190 }, { x: 240, y: 240 }].map((s, i) => (
            <text key={i} x={s.x} y={s.y} fontSize="14" opacity="0.4">â„ï¸</text>
          ))}
        </svg>
      </div>
    </div>
  );
}

// ============================================================
// APP
// ============================================================
function App() {
  const [activeTab, setActiveTab] = useState('itinerary');

  return (
    <div className="min-h-screen pb-24 pt-16">
      <SnowParticles />
      <Header />
      <main className="max-w-lg mx-auto px-4 pt-4 relative z-10">
        {activeTab === 'itinerary' && <ItineraryTab />}
        {activeTab === 'guide' && <GuideTab />}
        {activeTab === 'weather' && <WeatherTab />}
      </main>
      <TabBar activeTab={activeTab} onTabChange={setActiveTab} />
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
